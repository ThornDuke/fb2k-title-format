{
  "scopeName": "source.f2k",
  "name": "Foobar2000 Title Formatting",
  "fileTypes": ["fb2k"],
  "patterns": [
    {
      "name": "comment.line.double-slash.fb2k",
      "match": "^\\/\\/.*$"
    },
    {
      "name": "string.quoted.single.fb2k",
      "match": "'([^']|'')*'"
    },
    {
      "name": "variable.other.tag.f2k",
      "match": "%(title|artist|album artist|track artist|album|date|genre|tracknumber|totaltracks|discnumber|totaldiscs|codec|codec_profile|codec_long|filename|filename_ext|directoryname|path|subsong|path_sort|length|length_seconds|bitrate|channels|samplerate|replaygain_track_gain|replaygain_album_gain|replaygain_track_peak|replaygain_album_peak|replaygain_track_peak_db|replaygain_album_peak_db|filesize|filesize_natural|last_modified|list_index|list_total|isplaying|ispaused|playback_time|playback_time_seconds|playback_time_remaining|playback_time_remaining_seconds|queue_index|queue_indexes|queue_total|_text|_selected_text|_selected_text_no_focus|_back|_selected_back|_selected_back_no_focus|_display_index|_is_group|_is_themed|_system_year|_system_day|_system_month|_system_day_of_week|_system_hour|_system_julian_day|playlist_name|title|is_locked|lock_name|size|length|filesize|filesize_raw|is_active|is_playing|default_font_face|default_font_size)%"
    },
    {
      "name": "constant.other.user-tag.fb2k",
      "match": "%([a-zA-Z0-9 _]+)%",
      "captures": {
        "1": {
          "name": "constant.other.user-tag.name.fb2k"
        }
      }
    },
    {
      "name": "meta.fb2k",
      "begin": "\\$(abbr|ansi|ascii|lower|upper|num|caps|caps2|if|if2|if3|ifgreater|iflonger|ifequal|longest|len|pad|pad_right|cut|padcut|padcut_right|insert|add|sub|mul|div|mod|min|max|left|right|and|or|xor|not|fix_eol|meta|meta_sep|meta_num|info|char|strcmp|stricmp|directory|directory_path|greater|longer|strchr|strrchr|strstr|select|repeat|replace|ext|substr|trim|tab|stripprefix|swapprefix|peak_to_db|year|month|day_of_month|date|time|put|puts|get|crlf|rgb|set_global|get_global|set_style|calculate_blend_target|offset_colour|set_format|reset_format|set_font|reset_font)\\s*\\(",
      "end": "\\)",
      "captures": {
        "0": {
          "name": "support.function.fb2k"
        }
      },
      "patterns": [
        {
          "include": "$self"
        }
      ]
    },
    {
      "name": "invalid.illegal.function.fb2k",
      "begin": "\\$([a-zA-Z0-9_]+)\\s*\\(",
      "beginCaptures": {
        "1": {
          "name": "invalid.illegal.function.name.fb2k"
        }
      },
      "end": "\\)",
      "patterns": [
        {
          "include": "$self"
        }
      ]
    },
    {
      "name": "constant.language.fb2k",
      "match": "\\$(put|puts|get)\\s*\\(\\s*([a-zA-Z0-9_]+)"
    }
  ]
}
